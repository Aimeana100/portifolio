<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="shortcut icon" href="favicon.ico" type="image/x-icon" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>KARINGANIRE Anathole</title>

    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Public+Sans:wght@300;400;700&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="css/main.css" />
    <script
      src="https://kit.fontawesome.com/e7a6391963.js"
      crossorigin="anonymous"
    ></script>
  </head>
  <body>
    <div class="web__content">
      <header class="scrolled">
        <nav class="container navigation__bar">
          <div class="logo">
            <img width="60" src="assets/images/Ana10_icon.svg" alt="" />
          </div>

          <ul id="navbar" class="navbar">
            <li><a class="active" href="/"> Home </a></li>
            <li><a href="#about__me"> About me </a></li>
            <li><a href="#skills"> Skills </a></li>
            <li><a href="#projects"> My Work </a></li>
            <li><a href="#blogs"> Blogs </a></li>
            <li><a href="#contact__me"> Contact me </a></li>
          </ul>

          <div class="call__to__action">
            <a href="login.html"> Sign in | Sign up </a>
          </div>

          <div class="menu__toogle">
            <img
              id="mobile-nav-toggle"
              width="50"
              src="assets/images/Menu.svg"
              alt=""
            />
            <img
              id="desktop-nav-toggle"
              width="40"
              src="assets/images/Close.svg"
              alt=""
            />
          </div>
        </nav>
      </header>

      <main>
        <section id="login">
          <div class="container login__container">
            <div class="login__form__container">
              <div class="heading container">
                <h2>Register</h2>
              </div>

              <div class="login__with__google">
                <img src="assets/images/login_google.svg" alt="" />
              </div>

              <form action="" name="register__form" id="register__form">
                <div class="form__row">
                  <label for="names">Names</label>
                  <input onkeyup="return validateName()" type="text" name="names" id="names"  placeholder="" />
                  <label for="names" class="error_down" id="name__error"></label>

                </div>

                <div class="form__row">
                  <label for="email">Email</label>
                  <input onkeyup="validateEmail()" type="text" name="email" id="email" placeholder="" />
                  <label for="email" class="error_down" id="email__error"></label>

                </div>

                <div class="form__row">
                  <label for="password"> Passowrd </label>
                  <input
                    type="passowrd"
                    name="password"
                    id="password"
                    placeholder=""
                  />
                  <label for="passowrd" class="error_down" id="passowrd__error"></label>
                </div>

                <div class="form__row">
                  <label for="confirm__password">Confirm passowrd</label>
                  <input
                    type="passowrd"
                    name="confirm__password"
                    id="confirm__password"
                    placeholder=""
                  />
                  <label class=" error_down" id="password__error"></label>
                </div>

                <div class="send">
                  <button class="send" type="submit">Register</button>
                </div>

                <div class="new__register">
                  <p>
                    Alredy have an account ?
                    <a href="login.html"> <span>Login</span> </a>
                  </p>
                </div>
              </form>
            </div>
          </div>
        </section>
      </main>

      <footer>
        <div class="container footer__container">
          <div class="copyright">
            <p>Copy right &copy; KARINGANIRE Anathole <span>2022</span></p>
          </div>
          <div class="social">
            <a href="">
              <img src="assets/images/github.svg" alt="" /> github
            </a>
            <a href="">
              <img src="assets/images/linkedin.svg" alt="" /> linkedin
            </a>
          </div>
        </div>
      </footer>
    </div>
    <!--  LOAD CRYPTO JS LIBRARY -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js"></script>
        <!-- <script src="../dist/bundle.js"></script> -->
        <script src="../src/User.js"></script>
        <script src="../src/functions.js"></script>
        <script src="script/main.js"></script>

    <script>
      // Contact Formvalidation

      var nameError = document.getElementById("name__error");
      var emailError = document.getElementById("email__error");
      var passwordError = document.getElementById("password__error");

      var formError = document.getElementById("form__error");
      var register__form = document.getElementById("register__form");

      var formSubmitted = false;

      // name validation
      const validateName = () => {
        var name = document.getElementById("names").value;

        if (name.length == 0) {
          nameError.innerHTML = "Name is required";
          return false;
        }

        // var format = /[`!@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?~]/;

        // if (format.test(name)) {
        //   nameError.innerHTML = "Invalid character";
        //   return false;
        // }

        nameError.innerHTML = "<i class='fas fa-check-circle' ></i>";
        return true;
      };

      const validateEmail = () => {
        var email = document.getElementById("email").value;

        if (email.length == 0) {
          emailError.innerHTML = "Email is required";

          return false;
        }

        if (!email.match(/^[A-Za-z\._\-[0-9]*[@][A-Za-z]*[\.][a-z]{2,4}$/)) {
          emailError.innerHTML = "Email Invalid";
          return false;
        }

        emailError.innerHTML = "<i class='fas fa-check-circle' ></i>";
        return true;
      };

      const validatePassoword = () => {
        var passowrd = document.getElementById("password").value;
        var confirm__passowrd = document.getElementById("confirm__password").value;

        passwordError.innerHTML = "<i class='fas fa-check-circle' ></i>";
        return true;
      };

      register__form.addEventListener("submit", function (e) {
        e.preventDefault();
        
        if (validateForm()) {
          // ===========SAVE The User FORM =======
          var name = document.getElementById("names").value;
          var email = document.getElementById("email").value;
          var passowrd = document.getElementById("password").value;
          var confirm = document.getElementById("confirm__password").value;


          var saved = User.addUser(create_UUID(), name, email, Enc, date);
          if(saved){
            if (saved) {
              var mesg = document.querySelector(".add__message");
              mesg.style.padding = "10px";
              mesg.style.color = "green";
              mesg.innerText = "Thank you, we will reply via the email asp";
              this.reset();
              setTimeout(() => {
                mesg.innerText = "";
                mesg.style.padding = "0px";

              }, 10000);
            }

          }
        }
      });

      const validateForm = () => {
        var valid = true;
        formSubmitted = true;

        if (!validateName()) {
          valid = false;
        }

        if (!validateEmail()) {
          valid = false;
        }

        if (!validatePassoword()) {
          valid = false;
        }

        if (valid) {
          return true;
        } else {
          return false;
        }
      };
    </script>

  </body>
</html>
